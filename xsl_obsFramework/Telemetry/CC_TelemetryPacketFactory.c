
//
// Copyright 2003 P&P Software GmbH - All Rights Reserved
//
// CC_TelemetryPacketFactory.c
//
// This file was automatically generated by an XSL program
//

#include "../GeneralInclude/CompilerSwitches.h"
#include "../GeneralInclude/DebugSupport.h"
#include "../GeneralInclude/BasicTypes.h"
#include "../GeneralInclude/ClassId.h"
#include "../GeneralInclude/Constants.h"  
#include "../Telemetry/DC_DummyPUSTelemetryPacket.h"  
#include "../Telemetry/DC_PUSDataReportingPacket.h"  
#include "../Telemetry/DC_PUSMemoryDumpAbsolute.h"  
#include "../Telemetry/DC_PUSMemoryDumpOffset.h"  
#include "../Telemetry/DC_PUSTcVerificationPacket.h"  
#include "../Base/CC_RootObject.h"
#include "CC_TelemetryPacketFactory.h"


///////////////////////////////////////////////////////////////////////////////
//
//                            class data
//
///////////////////////////////////////////////////////////////////////////////


static CC_TelemetryPacketFactory* pInstance=pNULL;     


///////////////////////////////////////////////////////////////////////////////
//
//                            class  method(s) definition
//
///////////////////////////////////////////////////////////////////////////////


CC_TelemetryPacketFactory* CC_TelemetryPacketFactory_getInstance(void) {
    if (pInstance==pNULL)
        pInstance = CC_TelemetryPacketFactory_new();
    return pInstance;
}

///////////////////////////////////////////////////////////////////////////////
//
//                  non-virtual member method(s) definition
//
///////////////////////////////////////////////////////////////////////////////


  
void CC_TelemetryPacketFactory_setTelemetryPacket(CC_TelemetryPacketFactory *this,unsigned int i, DC_DummyPUSTelemetryPacket* pItem) {
    assert(i<this->sizeDummyPUSTelemetryPacket);
    assert(pItem!=pNULL);
    
    this->poolDummyPUSTelemetryPacket[i] = pItem;
    DC_DUMMYPUSTELEMETRYPACKET_GET_CLASS(this->poolDummyPUSTelemetryPacket[i])->setInUse(false);
}

unsigned int CC_TelemetryPacketFactory_getNumberDummyPUSTelemetryPacket(CC_TelemetryPacketFactory *this) {
    unsigned int counter = 0;
    for (unsigned int i=0; i<sizeDummyPUSTelemetryPacket; i++)
        if ( DC_DUMMYPUSTELEMETRYPACKET_GET_CLASS(this->poolDummyPUSTelemetryPacket[i])->isInUse() )
            counter++;
    return counter;
}

unsigned int CC_TelemetryPacketFactory_getCapacityDummyPUSTelemetryPacket(CC_TelemetryPacketFactory *this) {
    return this->sizeDummyPUSTelemetryPacket;
}
DC_DummyPUSTelemetryPacket* CC_TelemetryPacketFactory_allocateDummyPUSTelemetryPacket(CC_TelemetryPacketFactory *this, ) {
    assert( this->isObjectConfigured() );
    for (unsigned int i=0; i<this->sizeDummyPUSTelemetryPacket; i++)
    if (!DC_DUMMYPUSTELEMETRYPACKET_GET_CLASS(this->poolDummyPUSTelemetryPacket[i])->isInUse() ) { //这里C_GenerateDynamicFactoryBody.xsl是不是存在问题
        DC_DUMMYPUSTELEMETRYPACKET_GET_CLASS(this->poolDummyPUSTelemetryPacket[i])->setInUse(true);
           return this->poolDummyPUSTelemetryPacket[i];
        }
    return pNULL;
}

bool CC_TelemetryPacketFactory_isFreeDummyPUSTelemetryPacket( *this, ) {
    for (unsigned int i=0; i<sizeDummyPUSTelemetryPacket; i++)
        if ( !DC_DUMMYPUSTELEMETRYPACKET_GET_CLASS(this->poolDummyPUSTelemetryPacket[i])->isInUse() )
           return true;

    return false;
}

            
void CC_TelemetryPacketFactory_setTelemetryPacket(CC_TelemetryPacketFactory *this,unsigned int i, DC_PUSDataReportingPacket* pItem) {
    assert(i<this->sizePUSDataReportingPacket);
    assert(pItem!=pNULL);
    
    this->poolPUSDataReportingPacket[i] = pItem;
    DC_PUSDATAREPORTINGPACKET_GET_CLASS(this->poolPUSDataReportingPacket[i])->setInUse(false);
}

unsigned int CC_TelemetryPacketFactory_getNumberPUSDataReportingPacket(CC_TelemetryPacketFactory *this) {
    unsigned int counter = 0;
    for (unsigned int i=0; i<sizePUSDataReportingPacket; i++)
        if ( DC_PUSDATAREPORTINGPACKET_GET_CLASS(this->poolPUSDataReportingPacket[i])->isInUse() )
            counter++;
    return counter;
}

unsigned int CC_TelemetryPacketFactory_getCapacityPUSDataReportingPacket(CC_TelemetryPacketFactory *this) {
    return this->sizePUSDataReportingPacket;
}
DC_PUSDataReportingPacket* CC_TelemetryPacketFactory_allocatePUSDataReportingPacket(CC_TelemetryPacketFactory *this, unsigned int DefinitionBufferSize, unsigned int ValueBufferSize, unsigned int MaxNumberFA) {
    assert( this->isObjectConfigured() );
    for (unsigned int i=0; i<this->sizePUSDataReportingPacket; i++)
    if (DC_PUSDATAREPORTINGPACKET_GET_CLASS((this->poolPUSDataReportingPacket[i]))->getDefinitionBufferSize()>=DefinitionBufferSize &&
    DC_PUSDATAREPORTINGPACKET_GET_CLASS((this->poolPUSDataReportingPacket[i]))->getValueBufferSize()>=ValueBufferSize &&
    DC_PUSDATAREPORTINGPACKET_GET_CLASS((this->poolPUSDataReportingPacket[i]))->getMaxNumberFA()>=MaxNumberFA &&
    !DC_PUSDATAREPORTINGPACKET_GET_CLASS(this->poolPUSDataReportingPacket[i])->isInUse() ) { //这里C_GenerateDynamicFactoryBody.xsl是不是存在问题
        DC_PUSDATAREPORTINGPACKET_GET_CLASS(this->poolPUSDataReportingPacket[i])->setInUse(true);
           return this->poolPUSDataReportingPacket[i];
        }
    return pNULL;
}

bool CC_TelemetryPacketFactory_isFreePUSDataReportingPacket( *this, unsigned int DefinitionBufferSize, unsigned int ValueBufferSize, unsigned int MaxNumberFA) {
    for (unsigned int i=0; i<sizePUSDataReportingPacket; i++)
        if ( DC_PUSDATAREPORTINGPACKET_GET_CLASS(this->poolPUSDataReportingPacket[i])->getDefinitionBufferSize()>=DefinitionBufferSize &&
             DC_PUSDATAREPORTINGPACKET_GET_CLASS(this->poolPUSDataReportingPacket[i])->getValueBufferSize()>=ValueBufferSize &&
             DC_PUSDATAREPORTINGPACKET_GET_CLASS(this->poolPUSDataReportingPacket[i])->getMaxNumberFA()>=MaxNumberFA &&
             !DC_PUSDATAREPORTINGPACKET_GET_CLASS(this->poolPUSDataReportingPacket[i])->isInUse() )
           return true;

    return false;
}

            DC_PUSDataReportingPacket* CC_TelemetryPacketFactory_getPUSDataReportingPacket(CC_TelemetryPacketFactory *this, TD_SID sid) {
    assert(this->isObjectConfigured() );
    assert( sid>0 );

    for (unsigned int i=0; i<sizePUSDataReportingPacket; i++)
         if ( ( DC_PUSDATAREPORTINGPACKET_GET_CLASS(this->poolPUSDataReportingPacket[i])->getSID() == sid ) &&
             (  DC_PUSDATAREPORTINGPACKET_GET_CLASS(this->poolPUSDataReportingPacket[i])->isInUse() ) ) {
             return this->poolPUSDataReportingPacket[i];
         }
    return pNULL;
}
        
void CC_TelemetryPacketFactory_setTelemetryPacket(CC_TelemetryPacketFactory *this,unsigned int i, DC_PUSMemoryDumpAbsolute* pItem) {
    assert(i<this->sizePUSMemoryDumpAbsolute);
    assert(pItem!=pNULL);
    
    this->poolPUSMemoryDumpAbsolute[i] = pItem;
    DC_PUSMEMORYDUMPABSOLUTE_GET_CLASS(this->poolPUSMemoryDumpAbsolute[i])->setInUse(false);
}

unsigned int CC_TelemetryPacketFactory_getNumberPUSMemoryDumpAbsolute(CC_TelemetryPacketFactory *this) {
    unsigned int counter = 0;
    for (unsigned int i=0; i<sizePUSMemoryDumpAbsolute; i++)
        if ( DC_PUSMEMORYDUMPABSOLUTE_GET_CLASS(this->poolPUSMemoryDumpAbsolute[i])->isInUse() )
            counter++;
    return counter;
}

unsigned int CC_TelemetryPacketFactory_getCapacityPUSMemoryDumpAbsolute(CC_TelemetryPacketFactory *this) {
    return this->sizePUSMemoryDumpAbsolute;
}
DC_PUSMemoryDumpAbsolute* CC_TelemetryPacketFactory_allocatePUSMemoryDumpAbsolute(CC_TelemetryPacketFactory *this, unsigned int MaxNumberBlocks, unsigned int DumpBufferSize) {
    assert( this->isObjectConfigured() );
    for (unsigned int i=0; i<this->sizePUSMemoryDumpAbsolute; i++)
    if (DC_PUSMEMORYDUMPABSOLUTE_GET_CLASS((this->poolPUSMemoryDumpAbsolute[i]))->getMaxNumberBlocks()>=MaxNumberBlocks &&
    DC_PUSMEMORYDUMPABSOLUTE_GET_CLASS((this->poolPUSMemoryDumpAbsolute[i]))->getDumpBufferSize()>=DumpBufferSize &&
    !DC_PUSMEMORYDUMPABSOLUTE_GET_CLASS(this->poolPUSMemoryDumpAbsolute[i])->isInUse() ) { //这里C_GenerateDynamicFactoryBody.xsl是不是存在问题
        DC_PUSMEMORYDUMPABSOLUTE_GET_CLASS(this->poolPUSMemoryDumpAbsolute[i])->setInUse(true);
           return this->poolPUSMemoryDumpAbsolute[i];
        }
    return pNULL;
}

bool CC_TelemetryPacketFactory_isFreePUSMemoryDumpAbsolute( *this, unsigned int MaxNumberBlocks, unsigned int DumpBufferSize) {
    for (unsigned int i=0; i<sizePUSMemoryDumpAbsolute; i++)
        if ( DC_PUSMEMORYDUMPABSOLUTE_GET_CLASS(this->poolPUSMemoryDumpAbsolute[i])->getMaxNumberBlocks()>=MaxNumberBlocks &&
             DC_PUSMEMORYDUMPABSOLUTE_GET_CLASS(this->poolPUSMemoryDumpAbsolute[i])->getDumpBufferSize()>=DumpBufferSize &&
             !DC_PUSMEMORYDUMPABSOLUTE_GET_CLASS(this->poolPUSMemoryDumpAbsolute[i])->isInUse() )
           return true;

    return false;
}

            
void CC_TelemetryPacketFactory_setTelemetryPacket(CC_TelemetryPacketFactory *this,unsigned int i, DC_PUSMemoryDumpOffset* pItem) {
    assert(i<this->sizePUSMemoryDumpOffset);
    assert(pItem!=pNULL);
    
    this->poolPUSMemoryDumpOffset[i] = pItem;
    DC_PUSMEMORYDUMPOFFSET_GET_CLASS(this->poolPUSMemoryDumpOffset[i])->setInUse(false);
}

unsigned int CC_TelemetryPacketFactory_getNumberPUSMemoryDumpOffset(CC_TelemetryPacketFactory *this) {
    unsigned int counter = 0;
    for (unsigned int i=0; i<sizePUSMemoryDumpOffset; i++)
        if ( DC_PUSMEMORYDUMPOFFSET_GET_CLASS(this->poolPUSMemoryDumpOffset[i])->isInUse() )
            counter++;
    return counter;
}

unsigned int CC_TelemetryPacketFactory_getCapacityPUSMemoryDumpOffset(CC_TelemetryPacketFactory *this) {
    return this->sizePUSMemoryDumpOffset;
}
DC_PUSMemoryDumpOffset* CC_TelemetryPacketFactory_allocatePUSMemoryDumpOffset(CC_TelemetryPacketFactory *this, unsigned int MaxNumberBlocks, unsigned int DumpBufferSize) {
    assert( this->isObjectConfigured() );
    for (unsigned int i=0; i<this->sizePUSMemoryDumpOffset; i++)
    if (DC_PUSMEMORYDUMPOFFSET_GET_CLASS((this->poolPUSMemoryDumpOffset[i]))->getMaxNumberBlocks()>=MaxNumberBlocks &&
    DC_PUSMEMORYDUMPOFFSET_GET_CLASS((this->poolPUSMemoryDumpOffset[i]))->getDumpBufferSize()>=DumpBufferSize &&
    !DC_PUSMEMORYDUMPOFFSET_GET_CLASS(this->poolPUSMemoryDumpOffset[i])->isInUse() ) { //这里C_GenerateDynamicFactoryBody.xsl是不是存在问题
        DC_PUSMEMORYDUMPOFFSET_GET_CLASS(this->poolPUSMemoryDumpOffset[i])->setInUse(true);
           return this->poolPUSMemoryDumpOffset[i];
        }
    return pNULL;
}

bool CC_TelemetryPacketFactory_isFreePUSMemoryDumpOffset( *this, unsigned int MaxNumberBlocks, unsigned int DumpBufferSize) {
    for (unsigned int i=0; i<sizePUSMemoryDumpOffset; i++)
        if ( DC_PUSMEMORYDUMPOFFSET_GET_CLASS(this->poolPUSMemoryDumpOffset[i])->getMaxNumberBlocks()>=MaxNumberBlocks &&
             DC_PUSMEMORYDUMPOFFSET_GET_CLASS(this->poolPUSMemoryDumpOffset[i])->getDumpBufferSize()>=DumpBufferSize &&
             !DC_PUSMEMORYDUMPOFFSET_GET_CLASS(this->poolPUSMemoryDumpOffset[i])->isInUse() )
           return true;

    return false;
}

            
void CC_TelemetryPacketFactory_setTelemetryPacket(CC_TelemetryPacketFactory *this,unsigned int i, DC_PUSTcVerificationPacket* pItem) {
    assert(i<this->sizePUSTcVerificationPacket);
    assert(pItem!=pNULL);
    
    this->poolPUSTcVerificationPacket[i] = pItem;
    DC_PUSTCVERIFICATIONPACKET_GET_CLASS(this->poolPUSTcVerificationPacket[i])->setInUse(false);
}

unsigned int CC_TelemetryPacketFactory_getNumberPUSTcVerificationPacket(CC_TelemetryPacketFactory *this) {
    unsigned int counter = 0;
    for (unsigned int i=0; i<sizePUSTcVerificationPacket; i++)
        if ( DC_PUSTCVERIFICATIONPACKET_GET_CLASS(this->poolPUSTcVerificationPacket[i])->isInUse() )
            counter++;
    return counter;
}

unsigned int CC_TelemetryPacketFactory_getCapacityPUSTcVerificationPacket(CC_TelemetryPacketFactory *this) {
    return this->sizePUSTcVerificationPacket;
}
DC_PUSTcVerificationPacket* CC_TelemetryPacketFactory_allocatePUSTcVerificationPacket(CC_TelemetryPacketFactory *this, ) {
    assert( this->isObjectConfigured() );
    for (unsigned int i=0; i<this->sizePUSTcVerificationPacket; i++)
    if (!DC_PUSTCVERIFICATIONPACKET_GET_CLASS(this->poolPUSTcVerificationPacket[i])->isInUse() ) { //这里C_GenerateDynamicFactoryBody.xsl是不是存在问题
        DC_PUSTCVERIFICATIONPACKET_GET_CLASS(this->poolPUSTcVerificationPacket[i])->setInUse(true);
           return this->poolPUSTcVerificationPacket[i];
        }
    return pNULL;
}

bool CC_TelemetryPacketFactory_isFreePUSTcVerificationPacket( *this, ) {
    for (unsigned int i=0; i<sizePUSTcVerificationPacket; i++)
        if ( !DC_PUSTCVERIFICATIONPACKET_GET_CLASS(this->poolPUSTcVerificationPacket[i])->isInUse() )
           return true;

    return false;
}

            
/////////////////////////////////////////////////////////////////////////////////
//
//                    non-pure virtual  method(s) definition
//
/////////////////////////////////////////////////////////////////////////////////

static bool isObjectConfigured(void* obj) {

  if ( !CC_ROOTOBJECT(obj)->isObjectConfigured() )
        return false;
  
    if ( CC_TELEMETRYPACKETFACTORY(obj)->poolDummyPUSTelemetryPacket==pNULL )
        return false;

    for (unsigned int i=0; i< CC_TELEMETRYPACKETFACTORY(obj)->sizeDummyPUSTelemetryPacket; i++)
        if (  CC_TELEMETRYPACKETFACTORY(obj)->poolDummyPUSTelemetryPacket[i]==pNULL )
            return false;
     
    if ( CC_TELEMETRYPACKETFACTORY(obj)->poolPUSDataReportingPacket==pNULL )
        return false;

    for (unsigned int i=0; i< CC_TELEMETRYPACKETFACTORY(obj)->sizePUSDataReportingPacket; i++)
        if (  CC_TELEMETRYPACKETFACTORY(obj)->poolPUSDataReportingPacket[i]==pNULL )
            return false;
     
    if ( CC_TELEMETRYPACKETFACTORY(obj)->poolPUSMemoryDumpAbsolute==pNULL )
        return false;

    for (unsigned int i=0; i< CC_TELEMETRYPACKETFACTORY(obj)->sizePUSMemoryDumpAbsolute; i++)
        if (  CC_TELEMETRYPACKETFACTORY(obj)->poolPUSMemoryDumpAbsolute[i]==pNULL )
            return false;
     
    if ( CC_TELEMETRYPACKETFACTORY(obj)->poolPUSMemoryDumpOffset==pNULL )
        return false;

    for (unsigned int i=0; i< CC_TELEMETRYPACKETFACTORY(obj)->sizePUSMemoryDumpOffset; i++)
        if (  CC_TELEMETRYPACKETFACTORY(obj)->poolPUSMemoryDumpOffset[i]==pNULL )
            return false;
     
    if ( CC_TELEMETRYPACKETFACTORY(obj)->poolPUSTcVerificationPacket==pNULL )
        return false;

    for (unsigned int i=0; i< CC_TELEMETRYPACKETFACTORY(obj)->sizePUSTcVerificationPacket; i++)
        if (  CC_TELEMETRYPACKETFACTORY(obj)->poolPUSTcVerificationPacket[i]==pNULL )
            return false;
     

   return true;
}
///////////////////////////////////////////////////////////////////////////////
//
//                   object constructor and destructor
//
///////////////////////////////////////////////////////////////////////////////
// the following may be useful if you don't need it, just delete.
// CC_TelemetryPacketFactory *this = CC_TELEMETRYPACKETFACTORY(obj)
static void instance_init(Object *obj)
{
   CC_RootObject_setClassId(ID_TELECOMMANDFACTORY);

  CC_TELEMETRYPACKETFACTORY(obj)->sizeDummyPUSTelemetryPacket = 2;
     CC_TELEMETRYPACKETFACTORY(obj)->poolDummyPUSTelemetryPacket = (DC_DummyPUSTelemetryPacket**)malloc( CC_TELEMETRYPACKETFACTORY(obj)->sizeDummyPUSTelemetryPacket*sizeof(DC_DummyPUSTelemetryPacket*));
    for (unsigned int i=0; i< CC_TELEMETRYPACKETFACTORY(obj)->sizeDummyPUSTelemetryPacket; i++)
        CC_TELEMETRYPACKETFACTORY(obj)->poolDummyPUSTelemetryPacket[i] = pNULL;
      CC_TELEMETRYPACKETFACTORY(obj)->sizePUSDataReportingPacket = 2;
     CC_TELEMETRYPACKETFACTORY(obj)->poolPUSDataReportingPacket = (DC_PUSDataReportingPacket**)malloc( CC_TELEMETRYPACKETFACTORY(obj)->sizePUSDataReportingPacket*sizeof(DC_PUSDataReportingPacket*));
    for (unsigned int i=0; i< CC_TELEMETRYPACKETFACTORY(obj)->sizePUSDataReportingPacket; i++)
        CC_TELEMETRYPACKETFACTORY(obj)->poolPUSDataReportingPacket[i] = pNULL;
      CC_TELEMETRYPACKETFACTORY(obj)->sizePUSMemoryDumpAbsolute = 1;
     CC_TELEMETRYPACKETFACTORY(obj)->poolPUSMemoryDumpAbsolute = (DC_PUSMemoryDumpAbsolute**)malloc( CC_TELEMETRYPACKETFACTORY(obj)->sizePUSMemoryDumpAbsolute*sizeof(DC_PUSMemoryDumpAbsolute*));
    for (unsigned int i=0; i< CC_TELEMETRYPACKETFACTORY(obj)->sizePUSMemoryDumpAbsolute; i++)
        CC_TELEMETRYPACKETFACTORY(obj)->poolPUSMemoryDumpAbsolute[i] = pNULL;
      CC_TELEMETRYPACKETFACTORY(obj)->sizePUSMemoryDumpOffset = 1;
     CC_TELEMETRYPACKETFACTORY(obj)->poolPUSMemoryDumpOffset = (DC_PUSMemoryDumpOffset**)malloc( CC_TELEMETRYPACKETFACTORY(obj)->sizePUSMemoryDumpOffset*sizeof(DC_PUSMemoryDumpOffset*));
    for (unsigned int i=0; i< CC_TELEMETRYPACKETFACTORY(obj)->sizePUSMemoryDumpOffset; i++)
        CC_TELEMETRYPACKETFACTORY(obj)->poolPUSMemoryDumpOffset[i] = pNULL;
      CC_TELEMETRYPACKETFACTORY(obj)->sizePUSTcVerificationPacket = 1;
     CC_TELEMETRYPACKETFACTORY(obj)->poolPUSTcVerificationPacket = (DC_PUSTcVerificationPacket**)malloc( CC_TELEMETRYPACKETFACTORY(obj)->sizePUSTcVerificationPacket*sizeof(DC_PUSTcVerificationPacket*));
    for (unsigned int i=0; i< CC_TELEMETRYPACKETFACTORY(obj)->sizePUSTcVerificationPacket; i++)
        CC_TELEMETRYPACKETFACTORY(obj)->poolPUSTcVerificationPacket[i] = pNULL;
      

}

CC_TelemetryPacketFactory* CC_TelemetryPacketFactory_new(void)
{
        return (CC_TelemetryPacketFactory*)object_new(TYPE_CC_TELEMETRYPACKETFACTORY);

}



///////////////////////////////////////////////////////////////////////////////
//
//                   binding and type registration
//
///////////////////////////////////////////////////////////////////////////////

static void class_init(ObjectClass *oc, void *data)
{
CC_TelemetryPacketFactoryClass *dc_p_class = CC_TELEMETRYPACKETFACTORY_CLASS(oc);

        dc_p_class->isObjectConfigured = isObjectConfigured;

}

static const TypeInfo type_info = {
        .name = TYPE_CC_TELEMETRYPACKETFACTORY,
        .parent = TYPE_CC_ROOTOBJECT,
        .instance_size = sizeof(CC_TelemetryPacketFactory),
        .abstract = false,
        .class_size = sizeof(CC_TelemetryPacketFactoryClass),
        .instance_init = instance_init,
        .class_init = class_init,

};

void CC_TelemetryPacketFactory_register(void)
{
        type_register_static(&type_info);

}

